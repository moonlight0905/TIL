# Google Apps Scriptを使って実装
## １,LINE Notifyのアカウント作成＆トークン取得
## 2,GASのアカウント＆新しいプロジェクトを作成
## 3,GASでスクリプト作成（プロパティストアに環境変数を設定）
## 4,サイト更新→LINEメッセージの関数作成（LINE Notify APIを使う）
## 5, スクリプトをトリガーに設定
GAS「編集」→「現在のプロジェクトのトリガー」→任意の内容に設定
## スクリプト例
```Javascript
function checkNews() {
  // 監視対象のサイトのURL（プロパティストアの環境変数URLを設定）
  const url = PropertiesService.getScriptProperties().getProperty("URL");

  // 監視対象の要素のID
  const elementId = 'topicsfb';

  // 監視対象の要素を取得
  const response = UrlFetchApp.fetch(url);
  const content = response.getContentText();
  const html = Xml.parse(content, true);
  const element = html.getElementById(elementId);

  // 前回の内容と比較して変更があった場合にLINEにメッセージを送信
  const cache = CacheService.getScriptCache();
  const lastContent = cache.get('lastContent');
  if (lastContent !== content) {
    const token = PropertiesService.getScriptProperties().getProperty("LINE_TOKEN"); //プロパティストアの環境変数LINE_TOKENを設定
    const message = 'Yahooニュースのトップページが更新されました。'; // 送信するメッセージを設定
    let options = {
      'method': 'post',
      'payload': 'message=' + message,
      'headers': {
        'Authorization': 'Bearer ' + token
      }
    };
    UrlFetchApp.fetch('https://notify-api.line.me/api/notify', options);
    cache.put('lastContent', content, 60 * 60); // キャッシュに内容を保存（60分間有効）
  }
}
```
